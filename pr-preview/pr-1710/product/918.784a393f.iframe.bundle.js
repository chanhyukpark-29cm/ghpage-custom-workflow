"use strict";(self.webpackChunkproduct=self.webpackChunkproduct||[]).push([[918],{"./src/apps/catalog/components/sections/payment-related-products/PaymentRelatedProductsSection.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PaymentRelatedProductsSection:function(){return PaymentRelatedProductsSection}});var emotion_styled_base_browser_esm=__webpack_require__("../../.yarn/__virtual__/@emotion-styled-virtual-153331d9e8/0/cache/@emotion-styled-npm-11.8.1-af85f2fe52-67150fa788.zip/node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),react=__webpack_require__("../../.yarn/cache/react-npm-18.1.0-d66a868dc8-5bb296b561.zip/node_modules/react/index.js"),breakPoints=__webpack_require__("./src/styles/breakPoints.ts"),Intersection=__webpack_require__("./src/apps/@shared/components/intersection/Intersection.tsx"),ProductSlider=__webpack_require__("./src/apps/@shared/components/product-slider/ProductSlider.tsx"),useDeviceInfo=__webpack_require__("../../.yarn/__virtual__/@29cm-contexts-virtual-0fb00fdf78/0/cache/@29cm-contexts-npm-0.3.2-3114953cdb-599224c2c4.zip/node_modules/@29cm/contexts/dist/esm/packages/react/contexts/src/device/useDeviceInfo.js"),useIntersection=__webpack_require__("./src/apps/@shared/hooks/useIntersection.ts"),defineProperty=__webpack_require__("../../.yarn/cache/@babel-runtime-npm-7.16.7-62d4d1151f-47912f0aaa.zip/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),useLazyQuery=__webpack_require__("../../.yarn/__virtual__/@29cm-react-query-virtual-ecc5a04d58/1/libs/react-query/hooks/useLazyQuery.ts"),router=__webpack_require__("../../.yarn/__virtual__/@29cm-core-virtual-5225c8979b/1/libs/core/storybook/__mocks__/router.js"),ItemRecommendApiService=__webpack_require__("./src/apps/catalog/apis/ItemRecommendApiService.ts"),useAnalytics=__webpack_require__("../../.yarn/__virtual__/@29cm-analytics-virtual-b0ec17ff85/1/libs/analytics/src/hooks/useAnalytics.ts"),itemDetail_logs=__webpack_require__("./src/apps/catalog/constants/analytics/itemDetail.logs.ts"),useCatalogItemDetailQuery=__webpack_require__("./src/apps/booking/queries/useCatalogItemDetailQuery.ts"),useItemSalePrice=__webpack_require__("./src/apps/catalog/hooks/item-price/useItemSalePrice.ts"),head=__webpack_require__("../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-05cbffad6e.zip/node_modules/lodash-es/head.js"),useItemNo=__webpack_require__("./src/apps/catalog/hooks/item-info/useItemNo.ts");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var usePaymentRelatedProducts=function usePaymentRelatedProducts(){var _useCatalogItemPaymen=function useCatalogItemPaymentRelatedItemLazyQuery(){var _query$id$toString,_query$id,query=(0,router.t)().query,itemNo=Number(null!==(_query$id$toString=null===(_query$id=query.id)||void 0===_query$id?void 0:_query$id.toString())&&void 0!==_query$id$toString?_query$id$toString:0),_useLazyQuery=(0,useLazyQuery.t)(["@catalog/item-payment-related-item",itemNo],(function(){return ItemRecommendApiService.H.getPaymentRelatedProducts(itemNo)}),{enabled:Boolean(itemNo)});return{data:_useLazyQuery.data,isLoading:_useLazyQuery.isLoading,isError:_useLazyQuery.isError,fetchQuery:_useLazyQuery.fetchQuery}}(),data=_useCatalogItemPaymen.data,isLoading=_useCatalogItemPaymen.isLoading,fetchQuery=_useCatalogItemPaymen.fetchQuery,itemNo=(0,useItemNo._)(),moreLinkUrl="/catalog/".concat(itemNo,"/payment-related-products-list"),products=(0,react.useMemo)((function(){var _data$relatedPurchase;return(null!==(_data$relatedPurchase=null==data?void 0:data.relatedPurchaseItems)&&void 0!==_data$relatedPurchase?_data$relatedPurchase:[]).map((function(product){var _product$heartCount,_product$reviewCount,_product$reviewAverag;return _objectSpread(_objectSpread({},product),{},{heartCount:null!==(_product$heartCount=product.heartCount)&&void 0!==_product$heartCount?_product$heartCount:null,reviewCount:null!==(_product$reviewCount=product.reviewCount)&&void 0!==_product$reviewCount?_product$reviewCount:null,reviewAveragePoint:null!==(_product$reviewAverag=product.reviewAveragePoint)&&void 0!==_product$reviewAverag?_product$reviewAverag:0,isCoupon:!1,isNew:!1,isFreeShipping:!1})}))}),[null==data?void 0:data.relatedPurchaseItems]);return{products:products,isLoading:isLoading,isHide:!isLoading&&0===products.length,fetchQuery:fetchQuery,moreLinkUrl:moreLinkUrl}},sliderType=__webpack_require__("./src/apps/catalog/constants/sliderType.ts"),Link=__webpack_require__("./src/apps/@shared/components/link/Link.tsx"),ArrowRightIcon=__webpack_require__("./src/apps/catalog/components/icons/ArrowRightIcon.tsx"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("../../.yarn/__virtual__/@emotion-react-virtual-c665d2d660/0/cache/@emotion-react-npm-11.8.2-ff5ae3d6e8-a8733f8375.zip/node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var PaymentRelatedProductsSection=function PaymentRelatedProductsSection(_ref){var className=_ref.className,_useState=(0,react.useState)(null),ref=_useState[0],setRef=_useState[1],isMobile=(0,useDeviceInfo.u)().isMobile,_usePaymentRelatedPro=usePaymentRelatedProducts(),products=_usePaymentRelatedPro.products,isLoading=_usePaymentRelatedPro.isLoading,isHide=_usePaymentRelatedPro.isHide,fetchQuery=_usePaymentRelatedPro.fetchQuery,moreLinkUrl=_usePaymentRelatedPro.moreLinkUrl,_useTrackPaymentRelat=function useTrackPaymentRelatedProducts(){var _useAnalytics=(0,useAnalytics.z)(),trackAmplitude=_useAnalytics.trackAmplitude,trackFirebase=_useAnalytics.trackFirebase,itemDetail=(0,useCatalogItemDetailQuery.z)().data,totalPrice=(0,useItemSalePrice.z)().totalPrice;return{trackView:function trackView(){if(itemDetail){var itemCategory=(0,head.Z)(itemDetail.frontCategoryInfo);trackFirebase(itemDetail_logs.J6.VIEW_ITEM,{item_no:"".concat(itemDetail.itemNo),item_name:itemDetail.itemName,price:totalPrice,brand_no:"".concat(itemDetail.frontBrand.frontBrandNo),brand_name:itemDetail.frontBrand.brandNameKor,large_cat_no:"".concat((null==itemCategory?void 0:itemCategory.category1Code)||""),large_cat_name:"".concat((null==itemCategory?void 0:itemCategory.category1Name)||""),mid_cat_no:"".concat((null==itemCategory?void 0:itemCategory.category2Code)||""),mid_cat_name:"".concat((null==itemCategory?void 0:itemCategory.category2Name)||""),small_cat_no:"".concat((null==itemCategory?void 0:itemCategory.category3Code)||""),small_cat_name:"".concat((null==itemCategory?void 0:itemCategory.category3Name)||""),curr_screen:itemDetail_logs.YG.ITEM_DETAIL,type:"bought_together_item"})}},trackProductView:function trackProductView(product,position){trackFirebase(itemDetail_logs.J6.VIEW_BOUGHT_TOGETHER_ITEM,{item_no:"".concat(product.itemNo),item_name:product.itemName,curr_screen:itemDetail_logs.YG.ITEM_DETAIL,position:position})},trackClick:function trackClick(product,position){var _product$reviewCount2,_product$heartCount2,params={item_no:"".concat(product.itemNo),item_name:product.itemName,price:product.lastSalePrice,brand_no:"".concat(product.frontBrandNo),brand_name:product.frontBrandNameKor,discrount_rate:"".concat(product.lastSalePercent),review_count:"".concat(null!==(_product$reviewCount2=product.reviewCount)&&void 0!==_product$reviewCount2?_product$reviewCount2:0),review_point:"".concat(product.reviewAveragePoint),like_count:"".concat(null!==(_product$heartCount2=product.heartCount)&&void 0!==_product$heartCount2?_product$heartCount2:0),position:"".concat(position),source:"bought_together_item"};trackAmplitude(itemDetail_logs.eA.CLICK_ITEM,params),trackFirebase(itemDetail_logs.eA.CLICK_ITEM_BOUGHT_TOGETHER_ITEM,params)},trackClickItemMore:function trackClickItemMore(){var params={type:"bought_together_item_detail"};trackAmplitude(itemDetail_logs.eA.CLICK_ITEM_MORE,params),trackFirebase(itemDetail_logs.eA.CLICK_ITEM_MORE,params)}}}(),trackView=_useTrackPaymentRelat.trackView,trackProductView=_useTrackPaymentRelat.trackProductView,trackClick=_useTrackPaymentRelat.trackClick,trackClickItemMore=_useTrackPaymentRelat.trackClickItemMore,intersecting=(0,useIntersection.s)(ref);if((0,react.useEffect)((function(){intersecting&&trackView()}),[intersecting]),isHide)return null;var gap=isMobile?8:18,perPage=isMobile?2.15:5,sidePadding=isMobile?20:0,drag=!isMobile||"free";return(0,emotion_react_jsx_runtime_browser_esm.BX)(Container,{ref:setRef,className:className,children:[(0,emotion_react_jsx_runtime_browser_esm.tZ)(Intersection.l,{onLoad:fetchQuery,rootMargin:"500px"}),(0,emotion_react_jsx_runtime_browser_esm.BX)(Title,{children:["함께 구매한 상품",(0,emotion_react_jsx_runtime_browser_esm.BX)(MoreLink,{href:moreLinkUrl,passWebview:!0,native:!0,webviewNavOptions:{cart:!1,search:!1,title:"함께 구매한 상품"},onClick:trackClickItemMore,children:["더보기",(0,emotion_react_jsx_runtime_browser_esm.tZ)(ArrowIcon,{stroke:"#5d5d5d"})]})]}),(0,emotion_react_jsx_runtime_browser_esm.tZ)(ProductSlider.O,{products:products,perPage:perPage,gap:gap,drag:drag,sidePadding:sidePadding,hideRenderControls:isMobile,hideRank:!0,isLoading:isLoading,sliderType:sliderType.s.BOUGHT_TOGETHER_ITEM,onClick:trackClick,onView:trackProductView})]})},Container=(0,emotion_styled_base_browser_esm.Z)("div",{target:"exq0qq3"})("overflow:hidden;content-visibility:auto;contain-intrinsic-size:404px;",breakPoints.E.mobile,"{contain-intrinsic-size:316px;}"),Title=(0,emotion_styled_base_browser_esm.Z)("h2",{target:"exq0qq2"})("display:flex;justify-content:space-between;margin-bottom:15px;font-size:22px;line-height:30px;font-weight:bold;",breakPoints.E.mobile,"{margin-bottom:10px;padding:0 20px;font-size:20px;font-weight:700;}"),MoreLink=(0,emotion_styled_base_browser_esm.Z)(Link.r,{target:"exq0qq1"})("display:flex;align-items:center;margin-top:2px;font-size:13px;font-weight:normal;color:",(function(_ref2){return _ref2.theme.colors.gray06}),";",breakPoints.E.pc,"{display:none;}"),ArrowIcon=(0,emotion_styled_base_browser_esm.Z)(ArrowRightIcon.L,{target:"exq0qq0"})({name:"yz6j2s",styles:"width:13px;height:13px"});try{PaymentRelatedProductsSection.displayName="PaymentRelatedProductsSection",PaymentRelatedProductsSection.__docgenInfo={description:"다른 사용자들이 함께 구매한 상품",displayName:"PaymentRelatedProductsSection",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/catalog/components/sections/payment-related-products/PaymentRelatedProductsSection.tsx#PaymentRelatedProductsSection"]={docgenInfo:PaymentRelatedProductsSection.__docgenInfo,name:"PaymentRelatedProductsSection",path:"src/apps/catalog/components/sections/payment-related-products/PaymentRelatedProductsSection.tsx#PaymentRelatedProductsSection"})}catch(__react_docgen_typescript_loader_error){}}}]);